<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco Ex</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

</head>

<body>

    <div class="text-center">
        <h1 class="shadow-sm p-3 mb-5 bg-white rounded text-primary">Banco Central de Gragolandia</h1>
    </div>

    <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
          <a class="nav-item nav-link active" id="nav-cadastrar-tab" data-toggle="tab" href="#nav-cadastrar" role="tab" aria-controls="nav-cadastrar" aria-selected="true">Cadastro de Clientes</a>
          <a class="nav-item nav-link" id="nav-consultar-tab" data-toggle="tab" href="#nav-consultar" role="tab" aria-controls="nav-consultar" aria-selected="false">Consultar</a>
          <a class="nav-item nav-link" id="nav-sacar-tab" data-toggle="tab" href="#nav-sacar" role="tab" aria-controls="nav-sacar" aria-selected="false">Sacar</a>
          <a class="nav-item nav-link" id="nav-depositar-tab" data-toggle="tab" href="#nav-depositar" role="tab" aria-controls="nav-depositar" aria-selected="false">Depositar</a>

        </div>
      </nav>
      <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-cadastrar" role="tabpanel" aria-labelledby="nav-cadastrar-tab">
            <p>
                <form id="formCliente" class="container bg-secondary text-white border border-dark rounded" style="width: 600px;">
                    <p>
                        <div class="text-center">
                            <h4>
                                Cadastro de Cliente
                            </h4> 
                        </div>
                        <div class="form-row">
                            <div class="col-md-5 mb-2">
                                <label for="idNome">Nome e Sobrenome</label>
                                <input type="text" class="form-control" id="idNome" placeholder="Nome" required>
                            </div>
                            <div class="col-md-4 mb-2">
                                <label for="idCpf">CPF</label>
                                <input type="number" class="form-control" id="idCpf" placeholder="CPF" required>
                            </div>
                            <div class="col-md-3 mb-2">
                                <label for="idRg">RG</label>
                                <div class="input-group">
                                    <input type="number" class="form-control" id="idRg" placeholder="RG" aria-describedby="inputGroupPrepend" required>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col-md-5 mb-2">
                                <label for="idEndereco">Endereço</label>
                                <input type="text" class="form-control" id="idEndereco" placeholder="Endereço" required>
                            </div>
                            <div class="col-md-4 mb-2">
                                <label for="idNúmero">Número</label>
                                <input type="number" class="form-control" id="idNumero" placeholder="Número" required>
                            </div>
                            <div class="col-md-3 mb-2">
                                <label for="idSenha">Senha</label>
                                <input type="password" maxlength="6" class="form-control" id="idSenha" placeholder="Númerica" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                                <label class="form-check-label" for="invalidCheck">
                                    Concordo com os termos e condições
                                </label>
                            </div>
                        </div>    
                        <button class="btn btn-success" type="button" onclick="cadastrarCliente()" id="cadCliente">Cadastrar</button>
                    </p>
                </form>
            </p>
            <p>
                <div id="idOutCadastro" hidden class="text-center alert alert-success" role="alert">
                    <output><h2>Cliente cadastrado com sucesso</h2></output>
                    <br>
                    <h3><output id="idOutNumConta"></output></h3>
                </div>
            </p>
        </div>

        <div class="tab-pane fade" id="nav-consultar" role="tabpanel" aria-labelledby="nav-consultar-tab">
            <br>
            <div class="container border rounded text-white border-dark" style="width: 600px; background-color: olivedrab;">
                <p>
                    <div class="text-center">
                        <h4>
                            Consulta de Saldo
                        </h4>
                    </div>
                </p>
                <div class="input-group mb-3">  
                    <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroup-sizing-default">Numéro da Conta</span>
                    </div>
                    <input type="number" class="form-control" id="idConConta" aria-describedby="inputGroup-sizing-default">
                </div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroup-sizing-default">Senha da Conta</span>
                    </div>
                    <input type="number" class="form-control" id="idSenhaConta" aria-describedby="inputGroup-sizing-default">
                </div>

                <p>
                    <button class="btn btn-primary text-white" type="submit" onclick="consultarSaldo()" id="conSaldo">Consultar</button>
                    <div class="text-center container border rounded text-body border-dark" style="width: 400px; background-color: white;" id="idOutConsulta" hidden>
                        <p>
                            <h5>Dados de Consulta do Usuário</h5>
                        </p>
                        <p>
                            <h6><output id="idOutConsulta">Terminar</output></h6>
                        </p>
                    </div>
                </p>
            </div>
        </div>

        <div class="tab-pane fade" id="nav-sacar" role="tabpanel" aria-labelledby="nav-sacar-tab">
            <p>
                <div class="container border rounded text-white border-dark" style="width: 600px; background-color: olivedrab;">
                    <p>
                        <div class="text-center">
                            <h4>
                                Saque de Dinheiro
                            </h4>
                        </div>
                    </p>
                    <p>
                        <div class="container border rounded text-white border-dark" style="width: 400px; background-color: white;">
                            <p>
                                <div class="alert alert-info" role="alert">
                                    Notas disponíveis para saque: <br> R$10 - R$20 - R$50 - R$100
                                </div>
                            </p>
                        </div>

                    </p>
                </div>
            </p>
        </div>

        <div class="tab-pane fade" id="nav-depositar" role="tabpanel" aria-labelledby="nav-depositar-tab">Depositar</div>

      </div>


</body>
<!-- Referencia as classes Cliente e Conta no projeto -->
<script src="js/Cliente.js"></script>
<script src="js/Conta.js"></script>
<script src="js/Banco.js"></script>
<script>
    
    let banco = new Banco("Banco Central da Gragolandia", "666.777.888/0001-24", 2412)

    function cadastrarCliente() {
        let nome = document.getElementById("idNome").value
        let cpf = Number(document.getElementById("idCpf").value)
        let rg = Number(document.getElementById("idRg").value)
        let endereco = document.getElementById("idEndereco").value + ", " + document.getElementById("idNumero").value

        let senha = Number(document.getElementById("idSenha").value)
        let numConta = Math.floor(Math.random() * 10000)
        let saldo = 0
        let limite = 500
        let tipoConta = 1

        let conta = new Conta(numConta, saldo, limite, senha, tipoConta)

        let cliente = new Cliente(nome, conta, cpf, rg, endereco)
        
        console.log(`Seu cadastro foi efetuado com sucesso: ${nome}, ${cpf}, ${rg}, ${endereco}, ${senha}, ${numConta}, ${saldo}, ${limite}, ${tipoConta}`);
        console.log(`Conta: ${conta.numConta}`);
        console.log(`Cliente: ${cliente.conta.numConta}`);
        
        document.getElementById("formCliente").reset();
        
        document.getElementById("idOutCadastro").hidden = false
        document.getElementById("idOutNumConta").value = `O número da sua conta registrada é ${numConta}.`

        banco.adicionaClientes(cliente)
    }
    
    function consultarSaldo(codCliente) {
        let consulta = Number(document.getElementById("idConConta").value)
        let senhaconsulta = Number(document.getElementById("idSenhaConta").value)
        let acesso = false

        // Descobrir como comparar o numero da conta cadastrada com a informada no input
        for (let i = 0; i < banco.cliente.length; i++) {
            if (consulta == banco.getCliente(i).conta.numConta) {
                alert("Funcionou")
                acesso = true
            }
            
            if (acesso == true) {
                document.getElementById("idOutConsulta").hidden = false

            } else {
                document.getElementById("idOutConsulta").hidden = true
                
            }
        }
        
    }

    function depositar(codCliente, valorDeposito) {
        // Juro que nao entendi isso
        //banco.getCliente(codCliente).conta.depositar(valorDeposito)
    }

    function sacar(codCliente, valorSaque) {
        // Juro que nao entendi isso
        //banco.getCliente(codCliente).conta.sacar(valorSaque)
    }

    /*
    //Cria o objeto cliente através da chamada do construtor Cliente(nome, conta)
    let conta1 = criarConta("1234-0", 500.00, 200.00, "Trocar123");

    let cliente = new Cliente("Joao",
        conta1); //Neste exemplo, o nome está sendo passado por valor (Já que é um tipo primitivo)
    //já a conta, por ser ujm objeto, está sendo passado por referencia (seu endereço está
    //sendo passado para o objeto cliente)

    conta1.depositar(123); //Observe que estamos depositando diretamente na conta1 (não estamos passando pelo cliente) 
    console.log("Saldo do cliente :" + cliente.conta
        .saldo); //ao verificar o saldo veremos que o depósito anteriror ocorreu para 
    //a conta do cliente... 

    let cliente2 = new Cliente("José", criarConta("1234-2", 500.00, 200.00, "Trocar123"));

    let cliente3 = new Cliente("Alberto", criarConta("1234-3", 500.00, 200.00, "Trocar123"));

    console.log("->" + cliente.conta); //Mostra o objeto "conta" que está associado ao cliente 

    console.log("Qtd Clientes: " + Cliente.contadorCliente); //Exibe a qtd de objetos da classe Cliente que foram 
    //criados em memória

    console.log(cliente.conta.numConta);

    //Alterando o nome do cliente através do método "set nome"
    cliente.nome = "Joao";

    //acessa o método depositar da conta que está contida no objeto cliente  
    cliente.conta.depositar(1000);

    console.log(cliente);

    //acessa o método sacar da conta que está contida no objeto cliente  
    //e recebe o retorno do método na variável statusOp
    let statusOp = cliente.conta.sacar(1600.00);
    if (statusOp) {
        console.log("Saque realizado com sucesso");
    } else {
        console.log("Saldo insuficiente para realizar saque");
    }

    function criarConta(numConta, saldoInicial, limite, senhaInicial) {
        //Cria o objeto conta1...
        let conta1 = new Conta(numConta, saldoInicial, limite, senhaInicial);

        return conta1; //Retorna a referência ao objeto conta1, ou seja, o endereço 
        //do objeto na memória
    }
    */

</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

</html>